<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link href="//cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<script src="//cdn.quilljs.com/1.3.6/quill.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
	<form id="introForm" action="/hotel/management/intro/add" method="post">
		<div id="editor"></div>
		<textarea name ="content" id="content" rows="16" class="hidden" style="display:none" ></textarea>
		<button type="button" onclick="submit()">등록</button>
		<button type="button" onclick="cancel()">취소</button>
	</form>
<script src="/js/editor.js"></script>
<script>
	function cancel(){
		if(!confirm('취소하면 내용이 사라집니다. 취소하시겠습니까?')){
			return false;
		}
		
		const imgElements = document.querySelectorAll('img');
		
		imgElements.forEach(imgElement => {
			const fileNames = [];
			const src = imgElement.src;
			
			const url = new URL(src);
			const params = new URLSearchParams(url.search);
			
			const fileName = params.get('fileName');
			fileNames.push(fileName);
		});
			$.ajax({
                type: 'post',
                url: '/hotel/file/cancel',
                contentType: 'application/json',
                data: JSON.stringify(fileNames),
                success: function (response) {
                    alert(response);
                    location.href='/hotel/management';
                },
                error: function (err) {
                    console.log('ERROR!! ::');
                    console.log(err);
                }
            });
		
	}

</script>
</body>
</html>